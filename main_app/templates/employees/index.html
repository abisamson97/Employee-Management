{% extends 'base.html' %} {% block content %}

<h1>List of Employees</h1>

<form id="filterForm" method="get" action="{% url 'index' %}">
  <label for="skill">Filter by Skill:</label>
  <select name="skill" id="skill">
    <option value="" selected>All Skills</option>
    {% for skill in skills.all %}
    <option value="{{ skill.id }}">{{ skill.name }}</option>
    {% endfor %}
  </select>

  <label for="position">Filter by Position:</label>
  <select name="position" id="position">
    <option value="" selected>All Positions</option>
    {% for position in positions.all %}
    <option value="{{ position.id }}">{{ position.name }}</option>
    {% endfor %}
  </select>

  <button
    id="filterButton"
    class="btn modal-trigger"
    data-target="employeeModal"
    type="submit"
  >
    Filter
  </button>
</form>

{% for employee in employees %}
<a href="/employees/{{ employee.id }}">
  <div class="card">
    <div class="card-content">
      <span class="card-title">{{ employee.name }}</span>
    </div>
  </div>
</a>
{% endfor %}
<div class="card">
  <div class="card-content">
    <h2>Filtered Employees</h2>
    {% if filtered_employees %}
    <div class="card">
      <div class="card-content">
        <ul id="filteredEmployeesList">
          {% for emp in filtered_employees %}
          <li><a href="{{ emp.get_absolute_url }}">{{ emp.name }}</a></li>
          {% endfor %}
        </ul>
      </div>
    </div>
    {% endif %}
  </div>
</div>

<script>
  const filterEl = document.getElementById("position");
  M.FormSelect.init(filterEl);

  const filterSkillEl = document.getElementById("skill");
  M.FormSelect.init(filterSkillEl);
</script>

{% endblock %}
